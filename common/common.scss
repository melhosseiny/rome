@import url('https://fonts.googleapis.com/css2?family=Vollkorn:wght@400;700;900&family=Open+Sans&display=swap');

@import "variables";

// admin:admin_base
.admin-content .admin-contents {
  padding: 8px;
}

// base:discourse
body {
  font-family: $base-font-family;
}

html, body {
  background-color: $background-color;
}

blockquote {
  border-color: var(--primary);
}

h1, h2, h3, h4, h5, h6 {
  font-family: $base-font-family;
}

img.avatar {
  border: 1px solid rgba(0,0,0,0.25);
  border-radius: 4px;
  box-shadow: $alt-shadow;
  filter: sepia(0.7);
}

textarea,
input[type="text"],
input[type="password"],
input[type="datetime"],
input[type="datetime-local"],
input[type="date"],
input[type="month"],
input[type="time"],
input[type="week"],
input[type="number"],
input[type="email"],
input[type="url"],
input[type="search"],
input[type="tel"],
input[type="color"] {
  box-shadow: $alt-shadow;
  caret-color: red;
  &:focus {
    box-shadow: $shadow;
  }
}

.discourse-no-touch .sortable:hover, .discourse-no-touch .sortable:focus {
  background-color: var(--highlight-medium);
}

// base:alert
.alert.alert-info {
  background-color: var(--secondary);
}

// base:category-list
.category-list {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  list-style-type: none;
  padding-left: 0;
  margin-left: 0;
  .category, .topics, .latest {
    display: flex;
    flex-direction: column;
  }
  &.with-topics .category {
    width: auto;
  }
  .category-name {
    color: var(--success);
    font-family: $base-font-family;
  }
  .category .category-description {
    font-family: $alt-font-family;
    font-size: 0.875em;
    line-height: 1.71em;
    color: $alt-text-color;
  }
  .topics {
    width: auto;
    text-align: right;
    .value {
      font-weight: bold;
    }
  }
  .topic-statuses .topic-status {
    color: var(--primary);
  }
  .featured-topic:first-of-type {
    margin-top: 8px;
  }
  .featured-topic:last-of-type {
    margin-bottom: 8px;
  }
  .featured-topic a.last-posted-at {
    color: var(--primary-med-or-secondary-high);
  }
  li {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    position: relative;
    margin-right: 24px;
    margin-bottom: 24px;
    box-sizing: border-box;
    .item {
      flex: 1;
      padding: 4px 8px;
      margin: $frame-size;
      border: $frame-border-size $frame-border-style $color-frame;
      box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
      box-sizing: border-box;
      &:before, &:after {
        content: "";
        display: inline-block;
        position: absolute;
        width: $frame-size;
        height: $frame-size;
        border: $frame-border-size $frame-border-style $color-frame;
      }
      &:before {
        top: $frame-border-size-neg;
        left: $frame-border-size-neg;
        border-radius: 50% 50% 0 50%;
      }
      &:after {
        top: $frame-border-size-neg;
        right: $frame-border-size-neg;
        box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        border-radius: 50% 50% 50% 0;
      }
    }
    &:before, &:after {
      content: "";
      display: inline-block;
      position: absolute;
      width: $frame-size;
      height: $frame-size;
      border: $frame-border-size $frame-border-style $color-frame;
      box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
    }
    &:before {
      bottom: $frame-border-size-neg;
      left: $frame-border-size-neg;
      border-radius: 50% 0 50% 50%;
    }
    &:after {
      bottom: $frame-border-size-neg;
      right: $frame-border-size-neg;
      border-radius: 0 50% 50% 50%;
    }
    .category-text-title {
      justify-content: center;
      .d-icon {
        color: var(--tertiary);
      }
    }
  }
  li:nth-child(3n) {
    margin-right: 0;
  }
}

.categories-and-latest, .categories-and-top {
  .category-list {
    flex-direction: column;
    li {
      margin-right: 0;
      flex: 0 1 auto;
    }
  }
  .latest-topic-list, .top-topic-list {
    .table-heading {
      display: none;
    }
    .latest-topic-list-item {
      margin-bottom: 8px;
    }
  }
}

.latest-topic-list-item {
  padding: 0;
  padding-bottom: 1em;
}

.category-boxes, .category-boxes-with-topics {
  .category-box {
    background-color: #fff;
    margin: 0 8px 8px 0;
    border-left-width: 8px;
    border-left-style: groove;
    .category-box-inner {
      border: 0;
      h3 {
        font-size: 1.17em;
      }
      h3, .d-icon {
        color: var(--tertiary);
      }
      .description {
        color: var(--primary);
      }
    }
  }
}

.category-boxes .category-box {
  width: calc(25% - 6px);
  &:nth-child(4n) {
    margin-right: 0;
  }
}

.category-boxes-with-topics .category-box {
  width: calc(33.33% - 6px);
  &:nth-child(3n) {
    margin-right: 0;
  }
}

.muted-categories-link {
  border-color: transparent;
}

// base:compose
#reply-control {
  box-shadow: $shadow;
  .reply-to {
    color: var(--primary);
  }
}

// base:directory
.directory table td {
  border-color: $color-frame;
}

// base:groups
.groups-boxes .group-box {
  background-color: var(--secondary);
}

.discourse-no-touch .groups-boxes .group-box:hover {
  box-shadow: $shadow;
}

// base:header
.d-header {
  background-color: $background-color;
  box-shadow: none;
}

.d-header-icons {
  .icon {
    .discourse-no-touch &:hover {
      background-color: var(--secondary);
      .d-icon {
        color: var(--primary);
      }
    }
  }
  .d-icon {
    color: var(--primary);
  }
}

.drop-down-mode .d-header-icons .active .icon {
  border-color: transparent;
  .d-icon {
    color: var(--primary);
  }
}

.extra-info-wrapper .header-title {
  font-family: $base-font-family;
  font-weight: 900;
}

// base:menu-panel
.menu-panel {
  border: 0;
  box-shadow: $shadow;
  li.category-link a.box:hover .category-name, li.category-link a.box:focus .category-name {
    color: var(--primary-very-low);
  }
}

.user-menu .quick-access-panel {
  border-color: $color-frame;
}

div.menu-links-header .menu-links-row {
  button.active {
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
    border-top-color: $color-frame;
    border-left-color: $color-frame;
    border-right-color: $color-frame;
  }
}

// base:modal
.modal-inner-container, .bootbox.modal  {
  background: #fff;
  box-shadow: $shadow;
}

.modal-header, .modal-footer {
  border: 0;
}

.modal-backdrop {
  background-color: rgba(0,0,0,0.1);
}

.modal {
  .nav {
    background-color: transparent;
  }
  &:focus {
    outline: none;
  }
}

// base:onebox
aside.onebox {
  border: none;
}

// base:popup-menu
.popup-menu {
  border: 0;
  box-shadow: $shadow;
  .btn.popup-menu-btn, .btn.popup-menu-btn-danger {
    border: 0 none;
    box-shadow: none;
    text-shadow: none;
    color: var(--primary);
    .discourse-no-touch & {
      &:hover,
      &.btn-hover {
        background-color: var(--highlight-medium);
        box-shadow: none;
      }
    }
    .d-icon {
      filter: none;
    }
  }
}

// base:search
.search-container {
  .search-advanced .search-title #bulk-select {
    padding-top: 0;
    button {
      box-shadow: none;
    }
  }
  .search-header, .search-bar, .search-filters, .search-filters .search-advanced-filters {
    background-color: var(--secondary);
  }
  .search-advanced .search-info {
    border-color: transparent;
    margin-bottom: 0;
  }
}

// base:tagging
.discourse-tag {
  text-shadow: none;
  &:before {
    content: '#';
    color: $alt-text-color;
  }
}
.discourse-tag.simple,
.discourse-tag.simple:visited,
.discourse-tag.simple:hover,
.select-kit .select-kit-row .discourse-tag,
.select-kit .select-kit-row .discourse-tag:visited,
.select-kit .select-kit-row .discourse-tag:hover {
  color: var(--primary);
  font-weight: bold;
}

section.tag-info {
  padding: 0;
}

// base:topic-post
.moderator .regular > .cooked {
  background-color: var(--highlight);
  color: rgba(0,0,0,0.8);
}

nav.post-controls .actions button:hover,
nav.post-controls .actions .double-button:hover button,
nav.post-controls .actions .double-button button.button-count+.toggle-like.d-hover,
nav.post-controls .show-replies:hover {
  background: var(--highlight-medium);
}

aside.quote .title {
  border-color: var(--primary);
}

.topic-post {
  box-sizing: border-box;
  position: relative;
  margin-bottom: 24px;
  padding-top: 1px;
  padding-bottom: 1px;
  article.boxed {
    margin: $frame-size;
    border: $frame-border-size $frame-border-style $color-frame;
    box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
    position: static;
    box-sizing: border-box;

    &:before, &:after {
      content: "";
      display: inline-block;
      position: absolute;
      width: $frame-size;
      height: $frame-size;
      border: $frame-border-size $frame-border-style $color-frame;
    }
    &:before {
      top: $frame-border-size-neg;
      left: $frame-border-size-neg;
      border-radius: 50% 50% 0 50%;
    }
    &:after {
      top: $frame-border-size-neg;
      right: $frame-border-size-neg;
      box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
      border-radius: 50% 50% 50% 0;
    }
  }
  &:before, &:after {
    content: "";
    display: inline-block;
    position: absolute;
    width: $frame-size;
    height: $frame-size;
    border: $frame-border-size $frame-border-style $color-frame;
    box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
  }
  &:before {
    bottom: $frame-border-size-neg;
    left: $frame-border-size-neg;
    border-radius: 50% 0 50% 50%;
  }
  &:after {
    bottom: $frame-border-size-neg;
    right: $frame-border-size-neg;
    border-radius: 0 50% 50% 50%;
  }
}

.topic-avatar {
  padding-top: 8px;
  padding-left: 8px;
  padding-right: 8px;
}

.topic-avatar, .topic-body {
  border-top: 0 none;
}

.topic-map, .topic-map section {
  border-color: transparent;
}

.embedded-posts {
  border: 0;
  &.bottom .row {
    .topic-avatar, .topic-body {
      border-top: 1px solid $color-frame;
    }
  }
  .topic-avatar {
    padding-left: 8px;
  }
}

.gap {
  color: var(--primary);
  padding-left: 0;
}

.small-action {
  border-top: 0 none;
  max-width: 774px;
  .topic-avatar {
    display: none;
  }
  .small-action-desc {
    color: var(--primary);
  }
}

// base:topic
#topic-progress {
  color: #000;
  .bg {
    background-color: var(--tertiary);
  }
}

.topic-status-info {
  border-top: 0 none;
  &:empty {
    display: none;
  }
}

#topic-title h1 {
  font-weight: 900;
}

// base:topic-list
.show-more.has-topics {
  position: static;
  font-weight: 900;
}

.topic-list {
  display: flex;
  flex-direction: column;
  list-style-type: none;
  padding-left: 0;
  hr.topic-list-item-separator {
    padding: 0;
    border: 0;
    height: 2px;
    background-color: var(--success);
    text-align: center;
    &:after {
      content: attr(data-message);
      display: inline-block;
      position: relative;
      top: -0.7em;
      padding: 0 0.5em;
      font-weight: 900;
      color: var(--quaternary);
      background-color: $background-color;
    }
  }
  .topic-list-item {
    display: flex;
    flex-direction: row;
    align-items: center;
    margin-left: 0;
    padding: 4px 0;
    margin-bottom: 8px;
    border-radius: 0;

    &.visited {
      .main-link .link-top-line .topic-statuses .d-icon {
        color: var(--primary-medium);
      }
    }

    .main-link {
      display: flex;
      flex-direction: column;
      line-height: 1.71;
      .link-top-line {
        .topic-statuses .d-icon {
          color: var(--primary);
        }
      }
      .link-bottom-line {
        color: $alt-text-color;
        line-height: 1;
        .num {
          font-family: $alt-font-family;
          font-size: 0.875em;
          display: flex;
          width: auto;
          margin-right: 8px;
          a {
            padding: 0;
          }
          .d-icon {
            padding-right: 4px;
          }
        }
        .views {
          width: auto;
          margin-right: 8px;
        }
        .discourse-tag {
          margin-right: 4px;
        }
      }
    }
    .fill {
      flex: 1;
    }
    .secondary {
    }
  }
}

div.education {
  padding: 0;
  border-color: var(--primary);
}

// base:user-badges
.user-badge {
  border-color: transparent;
  border-radius: 4px;
  margin-right: 2px;
}

// base:user
.user-content {
  background-color: transparent;
}

.user-main {
  background: #fff;
  padding: 8px;
  border-radius: 4px;
}

// components:badges
.badge-wrapper {
  .badge-category {
    .category-name {
      color: #61b67c;
      overflow: visible;
    }
  }
  &.box {
    padding: 0;
    .badge-category {
      .category-name {
        color: var(--primary-very-low);
        padding: 2px 4px;
      }
      .d-icon {
        margin: 2px 0 0 3px;
      }
    }
    .badge-category-parent-bg, .badge-category-bg {
      border-radius: 4px;
      border: 1px solid rgba(0,0,0,0.25);
      filter: sepia(1);
    }
    .badge-category-parent-bg + .badge-category-bg {
      border-left: none;
    }
  }
  &.bullet {
    align-items: center;
    margin-right: 5px;

    span.badge-category {
      padding-top: 3px;
      font-weight: bold;
      overflow: visible;
    }
    .badge-category-parent-bg, .badge-category-bg {
      border-radius: 25%;
      border: 1px solid rgba(0,0,0,0.25);
      width: 8px;
      height: 8px;
    }
    .badge-category-parent-bg + .badge-category-bg {
      width: 8px;
    }
    .badge-category-parent-bg {
      margin-right: 2px;
    }
  }
}

.badge-notification.new-topic::before {
  width: 8px;
  height: 8px;
  border-radius: 25%;
  border: 1px solid rgba(0,0,0,0.25);
}

.badge-notification.clicks {
  background-color: var(--primary-medium);
  color: #fff;
}

.badge-group {
  background-color: var(--secondary);
  border: 0;
}

// components:bookmark-list
.bookmark-list {
  display: table;
  .topic-list-item {
    display: table-row;
  }
}

// components:buttons
.btn, a.btn[href], .btn.btn-default, .menu-panel .panel-body-bottom .btn.btn-default {
  font-weight: bold;
  color: $background-color;
  background-color: var(--primary);
  border: 1px solid rgba(0,0,0,0.25);
  border-radius: 4px;
  box-shadow: $alt-shadow;
  letter-spacing: .0892857143em;
  text-shadow: -1px 0 rgba(0,0,0,0.35), 0 -1px rgba(0,0,0,0.35), 1px 0 rgba(0,0,0,0.35), 0 1px rgba(0,0,0,0.35);
  padding-left: 8px;
  padding-right: 8px;

  .d-icon {
    color: $background-color;
    filter: drop-shadow(-0.5px 0 rgba(0,0,0,0.25)) drop-shadow(0 -0.5px rgba(0,0,0,0.25)) drop-shadow(1px 0 rgba(0,0,0,0.25)) drop-shadow(0 1px rgba(0,0,0,0.25));
  }

  .d-button-label {
    font-weight: bold;
  }

  .discourse-no-touch & {
    &:hover,
    &.btn-hover {
      background-color: var(--primary);
      box-shadow: $shadow;
    }
  }
  &:active, &.btn-active {
    background: var(--primary);
  }
}

.btn.btn-icon.no-text {
  background-color: transparent;
  box-shadow: none;
  border: none;
  .d-icon {
    color: var(--primary);
    filter: none;
  }
  .discourse-no-touch & {
    &:hover,
    &.btn-hover {
      background-color: var(--highlight-medium);
      box-shadow: none;
    }
  }
}

.btn.btn-large {
  padding-left: 12px;
  padding-right: 12px;
}

.btn.btn-primary {
  background-color: var(--tertiary);
  .discourse-no-touch & {
    &:hover,
    &.btn-hover {
      background-color: var(--tertiary);
    }
  }
  &:active, &.btn-active {
    background-color: var(--tertiary);
  }
}

.btn.btn-danger {
  background-color: var(--danger);
  .discourse-no-touch & {
    &:hover,
    &.btn-hover {
      background-color: var(--danger);
    }
  }
  &:active, &.btn-active {
    background-color: var(--danger);
  }
}

.btn.date-time {
  text-shadow: none;
}

// components:navs
.nav-pills, .admin-controls .nav-pills {
  font-weight: bold;
  letter-spacing: .0892857143em;
  >li {
    border: 1px solid rgba(0,0,0,0);
  }
  >li>a:hover, >li.active>a, >li>a.active {
      color: $background-color;
      background-color: var(--tertiary);
      border-color: rgba(0,0,0,0.25);
      border-radius: 4px;
      box-shadow: $alt-shadow;
      text-shadow: -1px 0 rgba(0,0,0,0.25), 0 -1px rgba(0,0,0,0.25), 1px 0 rgba(0,0,0,0.25), 0 1px rgba(0,0,0,0.25);
  }
}

.nav-pills>li>a .d-icon.d-icon-caret-down {
  margin-right: 0;
}

.nav-stacked {
  background: transparent;
  li { border-bottom: 0; }
  a.active {
    background-color: var(--tertiary);
  }
}

// components:user-card
.user-card, .group-card {
  box-shadow: $shadow;
}

// foundation:base
tbody {
  border-color: var(--primary);
}

tr {
  border-color: $color-frame;
}

// select-kit
.select-kit {
  .select-kit-header {
    box-shadow: none;
    text-shadow: none;
  }
  // category-chooser
  &.combo-box.category-chooser {
    .select-kit-header {

    }
  }
  // combo-box
  &.combo-box {
    &.category-drop {
      .badge-category {
        padding-top: 0;
      }
      .badge-wrapper.box {
        span.badge-category {
          .category-name {
            padding: 0 4px;
          }
          .d-icon-lock {
            margin-right: 0;
          }
        }
      }
      .select-kit-header {
        .badge-wrapper.box {
          .badge-category-bg {
            background-color: transparent !important;
            border: none;
          }
        }
      }
    }
    .select-kit-body {
      box-shadow: $shadow;
    }
  }
  // composer-actions
  &.dropdown-select-box.composer-actions {
    .select-kit-header {
      border-color: transparent;
    }
  }
  &.dropdown-select-box,
  &.single-select.dropdown-select-box,
  &.multi-select.is-expanded, {
    .select-kit-body {
      border: none;
      box-shadow: $shadow;
    }
  }
  // period-chooser
  &.dropdown-select-box.period-chooser {
    .btn.select-kit-header {
      box-shadow: none;
    }
    .select-kit-body {
      box-shadow: $shadow;
    }
    .period-chooser-header {
      h2.selected-name {
        font-size: $base-font-size;
        font-family: $base-font-family;
        text-shadow: none;
      }
      .d-icon {
        padding-left: 0;
        filter: none;
      }
    }
  }
  // toolbar-popup-menu-options
  &.dropdown-select-box.toolbar-popup-menu-options {
    .select-kit-header {
      .d-icon {
        color: var(--primary);
      }
      .discourse-no-touch & {
        &:hover,
        &.btn-hover {
          .d-icon {
            color: var(--primary);
          }
        }
      }
    }
  }
}

// d-editor
.d-editor-button-bar {
  border-bottom: 0;
}

// topic-timeline
.timeline-container .topic-timeline {
  .timeline-scrollarea {
    border-color: rgba(0,0,0,0.25);
  }
  .timeline-handle {
    background-color: var(--tertiary);
  }
}

// plugins:poll
div.poll,
div.poll .poll-container,
div.poll.pie .poll-container,
div.poll .poll-title,
div.poll .poll-info,
div.poll .poll-buttons {
  border-color: transparent;
}

div.poll .poll-container {
  padding: 0.5em 0;
}

div.poll .poll-buttons {
  padding: 0;
}

div.poll .results .bar-back {
  background: #fff;
}

// plugins:docs
.docs-search, .mobile-view .docs .docs-search {
  padding: 0;
}

.docs-search-wrapper, .mobile-view .docs .docs-search .docs-search-bar {
  width: 100%;
}

.docs-search-wrapper .btn.clear-search {
  background-color: var(--primary);
  color: var(--secondary);
}

.docs-browse .docs-topic-list {
  .topic-list {
    display: table;
  }
  th:hover {
    background-color: var(--highlight-medium);
  }
}
